<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">

    <!-- Normalize CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700;1,900&display=swap" rel="stylesheet">

    <!-- https://igorescobar.github.io/jQuery-Mask-Plugin/ -->
    <script src="javascripts/jquery.mask.min.js"></script>

    <!-- Calendar picker -->
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script>
    $(function() {
      $("#datepicker1").datepicker({
        dateFormat: "dd/mm/yy",
        dayNames: ['Domingo','Segunda','Terça','Quarta','Quinta','Sexta','Sábado'],
        dayNamesMin: ['D','S','T','Q','Q','S','S','D'],
        dayNamesShort: ['Dom','Seg','Ter','Qua','Qui','Sex','Sáb','Dom'],
        monthNames: ['Janeiro','Fevereiro','Março','Abril','Maio','Junho','Julho','Agosto','Setembro','Outubro','Novembro','Dezembro'],
        monthNamesShort: ['Jan','Fev','Mar','Abr','Mai','Jun','Jul','Ago','Set','Out','Nov','Dez'],
        nextText: 'Próximo',
        prevText: 'Anterior'
      });
    });
    </script>

    <script src="javascripts/functions.js"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="stylesheets/general.css">

    <title>ViaCerta Protótipo</title>
  </head>
  <body>


    <!-- Modal Edit -->
    <div class="modal fade" id="modalEdit" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <!-- <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle">Modal title</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div> -->

          <div class="modal-body">
            <div class="text-center">
              <img class="mb-3 mt-4" src="images/icon-modal-warning.svg" alt="">
              <div class="txt-lg">
                A edição destes dados fará com que a<br>
                <strong>pré-proposta seja reavaliada</strong>
              </div>
            </div>
          </div>

          <div class="modal-footer modal-footer--centered">
            <button type="button" class="btn mb-2 btn-lg btn-dark" style="min-width: 100px;" onclick="window.location.href = 'cadastro_proposta_pre.html';; return false;">Editar dados</button>
            <br>
            <button type="button" class="btn btn-light2" data-dismiss="modal">Cancelar</button>
          </div>

        </div>
      </div>
    </div>




    <!-- Modal Wait Sending Proposal -->
    <div class="modal fade" id="modalSending" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <!-- <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle">Modal title</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div> -->

          <div class="modal-body">
            <div class="text-center">
              <img class="mb-3 mt-4 animated-rotate" src="images/icon-modal-analysing-proposal.svg" alt="">
              <div class="txt-lg">
                <strong>Aguarde um momento,</strong><br>
                estamos analisando a sua proposta...
              </div>
            </div>
          </div>

          <div class="modal-footer modal-footer--centered">
            <!-- <button type="button" class="btn btn-light2" data-dismiss="modal">Cancelar</button> -->
          </div>

        </div>
      </div>
    </div>



    <!-- Modal Approved -->
    <div class="modal fade" id="modalResult" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <!-- <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle">Modal title</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div> -->

          <div class="modal-body">
            <div class="text-center">
              <img class="mb-2 mt-4" src="images/icon-modal-approved.svg" alt="">
              <h4 class="color-approved">Proposta aprovada</h4>
              <div class="txt-lg">
                <strong>O valor de R$ 3.000 foi aprovado!</strong><br>
                A proposta está pronta para ser Efetivada.
              </div>
            </div>
          </div>

          <div class="modal-footer modal-footer--centered">
            <button type="button" class="btn btn-lg btn-effect mb-2" onclick="window.location.href = 'cadastro_proposta_efetivacao.html'">Efetivar Proposta</button>
            <br>
            <button type="button" class="btn btn-light2" onclick="window.location.href = 'consultar_propostas.html'">Efetivar mais tarde</button>
          </div>

        </div>
      </div>
    </div>



    <div tabindex="0" class="btn-float-help" onclick="alert('Função não disponível para este protótipo.'); return false;"></div>

    <!-- global-wrapper -->
    <div class="global-wrapper">

      <!-- aside-menu -->
      <aside class="aside-menu">
        <a class="aside-menu__home-link" href="index.html"></a>
        <img class="aside-menu__sidenavbar-placeholder" src="images/bg-sidenav-bar.jpg" alt="">
      </aside>
      <!-- /aside-menu -->

      <!-- content-wrapper -->
      <div class="content-wrapper">

        <!-- header-default -->
        <header class="header-default">
          <div class="header-default__logo">
            <a href="index.html" data-toggle="tooltip" data-placement="bottom" title="Ir para início de ViaCerta">
              <img src="images/logo-viacerta.svg" alt="ViaCerta">
            </a>
          </div>
          <img tabindex="0" class="header-default__account" src="images/element-sidenav-bar-account.jpg" alt="Notificações | Alan Mathison">
        </header>
        <!-- /header-default -->



        <section class="big-title big-title--with-info">
          <h1 tabindex="0">Simulação de Crédito</h1>
          <ul class="big-title__info">
            <li><strong>Proposta</strong>: 846251</li>
            <li><strong>Produto</strong>: 0001 - CP VIACERTA</li>
          </ul>
        </section>


        <!-- main -->
        <main>
          <div class="container container--main">

            <div class="row">
              <div class="col-12">
                <div class="card card--default-padding">

                  <div class="text-center mt-1 mb-5">
                    <img class="proposal-timeline" src="images/proposal-register-steps-2.svg" alt="Etapa atual: Inicialização">
                  </div>

                  <!-- customer-card -->
                  <div class="customer-card">
                    <div class="customer-card__column">
                      <div class="customer-card__cell">
                        <div class="customer-card__cell__label">CPF</div>
                        442.223.782-22
                      </div>
                      <div class="customer-card__cell cell-to-hide">
                        <div class="customer-card__cell__label">CEP</div>
                        24255-000
                      </div>
                      <div class="customer-card__cell cell-to-hide">
                        <div class="customer-card__cell__label">Grau de Instrução</div>
                        Superior Incompleto
                      </div>
                    </div>

                    <div class="customer-card__column">
                      <div class="customer-card__cell">
                        <div class="customer-card__cell__label">Nome</div>
                        Rafael Almeida Soares
                      </div>
                      <div class="customer-card__cell cell-to-hide">
                        <div class="customer-card__cell__label">Tipo de Residência</div>
                        Mora com família
                      </div>
                      <div class="customer-card__cell cell-to-hide">
                        <div class="customer-card__cell__label">Classe Profissional</div>
                        Assalariado
                      </div>
                    </div>

                    <div class="customer-card__column">
                      <div class="customer-card__cell">
                        <div class="customer-card__cell__label">Celular</div>
                        (61) 98820-3232
                      </div>
                      <div class="customer-card__cell cell-to-hide">
                        <div class="customer-card__cell__label">Estado Civil</div>
                        Casado
                      </div>
                      <div class="customer-card__cell cell-to-hide">
                        <div class="customer-card__cell__label">Renda Bruta</div>
                        R$ 4.500
                      </div>
                    </div>

                    <div class="customer-card__column">
                      <div class="customer-card__cell">
                        <div class="customer-card__cell__label">Limite Solicitado</div>
                        R$ 3.000
                      </div>
                      <div class="customer-card__cell cell-to-hide">
                        <div class="customer-card__cell__label">Dependentes</div>
                        1
                      </div>
                      <div class="customer-card__cell cell-to-hide">
                        <div class="customer-card__cell__label">Atividade Desde</div>
                        09/2018
                      </div>
                    </div>

                    <div class="clearfix"></div>

                    <button type="submit" class="btn btn-lg btn-secondaryc cell-to-hide" data-toggle="modal" data-target="#modalEdit">
                      <img src="images/icon-editar.svg" class="mr-1" alt="">
                      Editar
                    </button>

                    <div class="customer-card__view-more">Ver mais</div>
                  </div>
                  <!-- /customer-card -->


                  <form autocomplete="off" id="proposalForm">
                    <div class="row justify-content-center">
                      <div class="col-8">

                        <div class="row">
                          <div class="col-6">
                            <div class="form-group">
                              <label for="proposalValue" required>Valor da Compra</label>
                              <div class="input-currency">
                                <input value-type="currency" autocomplete="off" type="text" class="form-control" id="proposalValue" value="3000" required>
                              </div>
                            </div>
                          </div>
                          <div class="col-6">
                            <div class="special-box-info">
                              Valor pré-aprovado:<br>
                              <strong>R$ 3.000</strong>
                            </div>
                          </div>
                        </div>


                        <div class="row">
                          <div class="col-6">
                            <div class="form-group">
                              <label for="proposalDeadline" required>Prazo</label>
                              <select class="form-control" id="proposalDeadline" required>
                                <option value="" disabled selected>Selecione</option>
                                <option value="3">3 parcelas</option>
                                <option value="6">6 parcelas</option>
                                <option value="9">9 parcelas</option>
                                <option value="12">12 parcelas</option>
                                <option value="15">15 parcelas</option>
                                <option value="18">18 parcelas</option>
                              </select>
                            </div>
                          </div>
                          <div class="col-6">
                            <div class="form-group">
                              <label for="proposalPlan" required>Plano</label>
                              <select class="form-control" id="proposalPlan" required>
                                <option value="" disabled selected>Selecione</option>
                                <option value="Crédito Pessoal 1">Crédito Pessoal 1</option>
                                <option value="Crédito Pessoal 2">Crédito Pessoal 2</option>
                              </select>
                            </div>
                          </div>
                        </div>



                        <div class="row">
                          <div class="col-6">
                            <div class="form-group">
                              <label for="proposalFirstPayment" required>Data do 1º Pagamento</label>
                              <input id="datepicker1" value-type="date" autocomplete="off" autocomplete="off" type="text" placeholder="__/__/____" class="form-control" id="proposalFirstPayment" required>
                              <!-- <input value-type="date" autocomplete="off" type="date" class="form-control" id="proposalFirstPayment" required> -->
                            </div>
                          </div>
                          <div class="col-6">
                            <div class="form-group">
                              <label for="proposalPartialPayment">Valor da Parcela</label>
                              <input autocomplete="off" type="text" class="form-control" id="proposalPartialPayment" value="R$" readonly>
                            </div>
                          </div>
                        </div>

                        <div class="row">
                          <div class="col-6">
                            <div class="form-group">
                              <label for="proposalGoal" required>Objetivo do Crédito</label>
                              <select class="form-control" id="proposalGoal" required>
                                <option value="" disabled selected>Selecione</option>
                                <option value="Compras">Compras</option>
                                <option value="Despesas médicas">Despesas médicas</option>
                                <option value="Emergência">Emergência</option>
                                <option value="Educação">Educação</option>
                                <option value="Investimento">Investimento</option>
                                <option value="Pagamento de contas">Pagamento de contas</option>
                                <option value="Reformas/Consertos">Reformas/Consertos</option>
                                <option value="Viagem">Viagem</option>
                                <option value="Outros">Outros</option>
                              </select>
                            </div>
                          </div>
                        </div>

                        <!-- <div class="divider"></div> -->

                        <!-- <div class="row">
                          <div class="col-6">
                            <div class="form-group">
                              <label for="proposalEducation">Grau de Instrução</label>
                              <select class="form-control" id="proposalEducation">
                                <option value="" disabled selected>Grau de Instrução</option>
                                <option value="Não alfabetizado">Não alfabetizado</option>
                                <option value="Fundamental">Fundamental</option>
                                <option value="Médio">Médio</option>
                                <option value="Superior incompleto">Superior incompleto</option>
                                <option value="Superior/Pós/MBA">Superior/Pós/MBA</option>
                                <option value="Mestrado/Doutorado">Mestrado/Doutorado</option>
                              </select>
                            </div>
                          </div>
                          <div class="col-6">
                            <div class="form-group">
                              <label for="proposalProfessionalClass">Classe Profissional</label>
                              <select class="form-control" id="proposalProfessionalClass">
                                <option value="" disabled selected>Classe Profissional</option>
                                <option value="Assalariado">Assalariado</option>
                                <option value="Empresário">Empresário</option>
                                <option value="Aposentado">Aposentado</option>
                                <option value="Autônomo">Autônomo</option>
                                <option value="Agricultor">Agricultor</option>
                                <option value="Profissional Liberal">Profissional Liberal</option>
                                <option value="Servidor Público">Servidor Público</option>
                              </select>
                            </div>
                          </div>
                        </div>

                        <div class="row">
                          <div class="col-6">
                            <div class="form-group">
                              <label for="proposalWorkSince">Atividade Desde</label>
                              <input autocomplete="off" type="month" value="2020-09" class="form-control" id="proposalWorkSince" placeholder="Atividade Desde">
                            </div>
                          </div>
                          <div class="col-6">
                            <div class="form-group">
                              <label for="proposalGrossIncome" required>Renda Bruta</label>
                              <input autocomplete="off" type="text" class="form-control" id="proposalGrossIncome" placeholder="R$" required>
                            </div>
                          </div>
                        </div> -->

                        <div class="divider"></div>
                      </div>
                    </div>

                    <!-- additional-documents -->
                    <div class="additional-documents">
                      <div class="row justify-content-center">
                        <div class="col-8">

                          <div class="additional-documents__header">
                            <h4 tabindex="0">Anexo de documentos</h4>
                            <div><strong>O anexo da identidade é obrigatório.</strong> Demais documentos, como comprovantes de renda
                              e residência, auxiliam a não haver pendências para a aprovação da proposta</div>
                          </div>

                          <div class="mt-4">
                            <input autocomplete="off" type="file" class="form-control-file d-inline-block" id="proposalAdditionalFile">
                            <select class="form-control d-inline-block" id="proposalAdditionalFileType">
                              <option value="" disabled selected>Selecione</option>
                              <option value="Autorização">Autorização</option>
                              <option value="Conta Bancária">Conta Bancária</option>
                              <option value="Contrato">Contrato</option>
                              <option value="Comprovante de Endereço">Comprovante de Endereço</option>
                              <option value="Comprovante de Renda">Comprovante de Renda</option>
                              <option value="Foto do Cliente">Foto do Cliente</option>
                              <option value="Identidade">Identidade</option>
                              <option value="Orçamento">Orçamento</option>
                              <option value="Matrícula do Imóvel">Matrícula do Imóvel</option>
                              <option value="Outro">Outro</option>
                            </select>
                            <button name="add_document_file" class="btn btn-upload btn-lg d-inline-block" type="button">
                              Enviar
                            </button>
                          </div>

                          <div id="additionalFiles" class="additional-documents__files" style="display: none;">
                            <ul></ul>
                          </div>

                          <!-- <div class="additional-documents__files">
                            <ul>
                              <li class="additional-documents__files__item">
                                <a href="#">
                                  <span class="additional-documents__files__item__name">Identificação</span>
                                  <span>(RG do cliente.jpg)</span>
                                </a>
                                <div class="additional-documents__files__item__remove" href="#" data-toggle="tooltip" data-placement="top" title="Excluir arquivo"></div>
                              </li>
                              <li class="additional-documents__files__item">
                                <a href="#">
                                  <span class="additional-documents__files__item__name">Comprovante de Renda</span>
                                  <span>(meucompr-janeiro.jpg)</span>
                                </a>
                                <div class="additional-documents__files__item__remove" href="#" data-toggle="tooltip" data-placement="top" title="Excluir arquivo"></div>
                              </li>
                            </ul>
                          </div> -->


                        </div>
                      </div>
                    </div>
                    <!-- /additional-documents -->



                    <div class="row justify-content-center">
                      <div class="col-8">
                        <button style="float: right;" type="submit" class="btn btn-lg btn-primary">Enviar para análise</button>
                        <button style="float: left;" type="submit" class="btn btn-lg btn-secondaryb" onclick="window.location.href = 'cadastro_proposta_inicializacao.html'">Voltar ao Cadastro</button>
                      </div>
                    </div>

                  </form>
                </div>
              </div>
            </div>



          </div>
        </main>
        <!-- /main -->


      </div>
      <!-- /content-wrapper -->

    </div>
    <!-- global-wrapper -->


    <script>

    $(document).ready(function () {



      // $('[value-type="currency"]').mask('#.##0,00', {reverse: true});
      $('[value-type="currency"]').mask('#.##0', {reverse: true});
      $('[value-type="date"]').mask('00/00/0000');

      updatedPartialPayment();

      $('#proposalDeadline').change(function() {
        updatedPartialPayment();
      })

      $('#proposalValue').change(function() {
        updatedPartialPayment();
      })

      function updatedPartialPayment() {
        var proposalValue = $('#proposalValue').val();
        var proposalValueTreated = proposalValue.replace(/\./g, "").replace(/\,/g, ".");

        // if (proposalValueTreated > 3000) {
        //   alert('Informe um valor menor ou igual ao valor aprovado de R$ 3.000');
        //   $('#proposalValue').val('3.000');
        //   return false;
        // }

        var number = $('#proposalDeadline').val();

        if (number === null)
          return;

        var total = (proposalValueTreated / number).toFixed(2);
        var totalBr = total.replace(".", ",");
        $('#proposalPartialPayment').val("R$ " + totalBr);
      }






      // Submit proposal
      $('#proposalForm').submit(function () {

        // var proposalValue = $('#proposalValue').val();
        // if (proposalValue > 3000) {
        //   alert('O Limite Aprovado é de R$ 3.000.\nPor favor, altere o Valor de Compra para um valor menor ou igual ao Limite Aprovado.');
        //   return false;
        // }


        if (hasAddedIdDoc === false) {
          alert('Favor anexar documento de Identidade.');
          return false;
        }

        $("#modalSending").modal({
          backdrop: 'static',
          keyboard: false
        });

        setTimeout(function(){
          $("#modalSending").modal('hide');

          $("#modalResult").modal({
            backdrop: 'static',
            keyboard: false
          });
        }, 5000);

        return false;
      });

    });
    </script>

  </body>
</html>
